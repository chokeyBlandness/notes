# 架构设计-电商秒杀

### 什么是秒杀

在短时间（瞬时）内，有大量请求，购买一个数据有限的商品。

##### 需要解决的问题

高并发（读，写）

##### 秒杀系统目标

稳：高可用。系统稳定的提供服务

准：超卖问题。数据一致性问题。

快：高性能。优化的点。

### 架构原则

1、减少用户和服务端的交互

数据要少：请求参数和响应参数要少，降低对网络带宽的占用，降低对CPU的消耗（http会做一些数据的压缩和解压），降低对IO数据库的消耗。非不要的信息不要来回传。

请求数要少：合并请求。

路径要短：能从CDN返回，就不要请求服务端，降低对系统的穿透程度。

依赖要少：减少不必要的信息展示。优先级高的展示，低的去掉。

保证高可用：负载均衡，水平扩展，不要单点。

#### 数据动静分离

静态数据：url、用户、浏览的时间、地域、cookie缓存信息。

CDN、负载均衡。

放到离用户最近的地方。地域最近。系统最近（CDN、浏览器缓存、服务器缓存、redis、文件缓存等缓存技术）

### 热点数据

问题：无法识别哪个秒杀商品需要分配更多的资源。

解决方案：监控追踪。通过商品的用户访问量、添加购物车、下单数量、统计分析（以往经验、BI），发现热点数据。

发现热点数据：分析日志，系统计算某个页面/商品访问量变大，添加队列，系统订阅。

### 处理热点数据

优化：
